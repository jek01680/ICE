<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mybatis.mapper.oracle.resource">

	<select id="selectResManage" parameterType="ResManageSearchVO" resultType="resManageVo">
	select * from(
		select rownum as RNUM, A.*
		from (
		   	select * from resmanage
		    order by resname
		)A
	)
	<![CDATA[ 
	where RNUM > #{firstRecordIndex}
	 and RNUM <= #{firstRecordIndex } + #{recordCountPerPage}]]>
	</select>
	
	<select resultType="int" id="selectTotalRecord">
		select count(*) from resmanage 
	</select>

	
	<insert id="insertResManage" parameterType="resManagevo">
	insert into resmanage(resno, resname, resimage, ressize, reslocation, resoriginalimage, ressubdesc)
	values(resno_seq.nextval, #{resName}, #{resImage}, #{resSize}, #{resLocation}, #{resOriginalImage}, #{resSubdesc})

	</insert>
	<select id="selectResManageOne" parameterType="int" resultType="resManageVo">
		select * from resManage 
		where resNo=#{resNo}
	</select>
	<update id="updateResource" parameterType="resManageVo">
		update resmanage
		set resname=#{resName}
		<if test="resImage!=null and resImage!=''">
		, resimage=#{resImage}, ressize=#{resSize}, resoriginalimage=#{resOriginalImage}
		</if>
		, reslocation=#{resLocation}, ressubdesc=#{resSubdesc}
		where resno=#{resNo}
	</update>
	<delete parameterType="int" id="deleteResManage">
		delete from resmanage where resNo=#{resNo} 
	</delete>
</mapper>